{"ast":null,"code":"import _defineProperty from\"C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=function Upload(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),render=_useState4[0],setRender=_useState4[1];var _useState5=useState({folderName:\"\",version:\"\"}),_useState6=_slicedToArray(_useState5,2),inputs=_useState6[0],setInputs=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),profile=_useState8[0],setProfile=_useState8[1];useEffect(function(){var getAllUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var getAllData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://capstone-backend-4nxt.onrender.com/api/v1/users\");case 2:getAllData=_context.sent;setUsers(getAllData.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getAllUsers(){return _ref.apply(this,arguments);};}();getAllUsers();},[render]);var formdata=new FormData();formdata.append(\"folderName\",inputs.folderName);formdata.append(\"version\",inputs.version);formdata.append(\"profile\",profile);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"https://capstone-backend-4nxt.onrender.com/api/v1/users\",formdata);case 4:setRender(true);setInputs({folderName:\"\",version:\"\"});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handelDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var newUsers;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"https://capstone-backend-4nxt.onrender.com/api/v1/users/\".concat(id));case 2:newUsers=users.filter(function(item){return item._id!==id;});setUsers(newUsers);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function handelDelete(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputEmail1\",class:\"form-label\",children:\"Folder Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputs.folderName,onChange:function onChange(e){return setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));},name:\"folderName\",class:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputPassword1\",class:\"form-label\",children:\"Version\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputs.version,onChange:function onChange(e){return setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));},name:\"version\",class:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputPassword1\",class:\"form-label\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setProfile(e.target.files[0]);},name:\"profile\",class:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary\",children:\"Submit\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Folder Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Version\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users&&users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.folderName}),/*#__PURE__*/_jsx(\"td\",{children:user.version}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"img img-fluid\",src:\"https://capstone-backend-4nxt.onrender.com/\".concat(user.profile),alt:\"users\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(user._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Edit\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handelDelete(user._id);},className:\"btn btn-danger\",children:\"Delete\"})})]});})})]})})]});};export default Upload;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","Upload","users","setUsers","render","setRender","folderName","version","inputs","setInputs","profile","setProfile","getAllUsers","get","getAllData","data","formdata","FormData","append","handleSubmit","e","preventDefault","post","console","log","handelDelete","id","delete","newUsers","filter","item","_id","target","name","value","files","map","user"],"sources":["C:/Users/Admin/Desktop/Test Final/mern-stack-file-upload-master/client/src/pages/Upload.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nconst Upload = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [render, setRender] = useState(false);\r\n  const [inputs, setInputs] = useState({\r\n    folderName: \"\",\r\n    version: \"\",\r\n  });\r\n  const [profile, setProfile] = useState();\r\n  useEffect(() => {\r\n    const getAllUsers = async () => {\r\n      const getAllData = await axios.get(\"https://capstone-backend-4nxt.onrender.com/api/v1/users\");\r\n      setUsers(getAllData.data);\r\n    };\r\n    getAllUsers();\r\n  }, [render]);\r\n\r\n  const formdata = new FormData();\r\n  formdata.append(\"folderName\", inputs.folderName);\r\n  formdata.append(\"version\", inputs.version);\r\n  formdata.append(\"profile\", profile);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.post(\"https://capstone-backend-4nxt.onrender.com/api/v1/users\", formdata);\r\n      setRender(true);\r\n      setInputs({\r\n        folderName: \"\",\r\n        version: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  \r\n  \r\n\r\n  const handelDelete = async (id) => {\r\n    await axios.delete(`https://capstone-backend-4nxt.onrender.com/api/v1/users/${id}`);\r\n    const newUsers = users.filter((item) => {\r\n      return item._id !== id;\r\n    });\r\n    setUsers(newUsers);\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      \r\n      <div className=\"row\"  >\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"exampleInputEmail1\" class=\"form-label\">\r\n                Folder Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={inputs.folderName}\r\n                onChange={(e) =>\r\n                  setInputs({ ...inputs, [e.target.name]: e.target.value })\r\n                }\r\n                name=\"folderName\"\r\n                class=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-describedby=\"emailHelp\"\r\n              />\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"exampleInputPassword1\" class=\"form-label\">\r\n                Version\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={inputs.version}\r\n                onChange={(e) =>\r\n                  setInputs({ ...inputs, [e.target.name]: e.target.value })\r\n                }\r\n                name=\"version\"\r\n                class=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n              />\r\n            </div>\r\n            \r\n            <div class=\"mb-3\">\r\n              <label for=\"exampleInputPassword1\" class=\"form-label\">\r\n                Profile\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                onChange={(e) => setProfile(e.target.files[0])}\r\n                name=\"profile\"\r\n                class=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n              />\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\">\r\n              Submit\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Folder Name</th>\r\n                <th scope=\"col\">Version</th>\r\n                <th scope=\"col\">Profile</th>\r\n                <th scope=\"col\">Edit</th>\r\n                <th scope=\"col\">Delete</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users &&\r\n                users.map((user) => {\r\n                  return (\r\n                    <tr>\r\n                      <td>{user.folderName}</td>\r\n                      <td>{user.version}</td>\r\n                      <td>\r\n                        <img\r\n                          className=\"img img-fluid\"\r\n                          src={`https://capstone-backend-4nxt.onrender.com/${user.profile}`}\r\n                          alt=\"users\"\r\n                        />\r\n                      </td>\r\n\r\n                      <td>\r\n                          <Link to={`/edit/${user._id}`}>\r\n                            <button className=\"btn btn-primary\">Edit</button>\r\n                          </Link>\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            onClick={() => handelDelete(user._id)}\r\n                            className=\"btn btn-danger\"\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        </td>\r\n                       \r\n                    </tr>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}